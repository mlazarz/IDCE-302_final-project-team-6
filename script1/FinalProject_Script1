'''
Author:  Mitchell Lazarz
Creation Date:  24 September 2020
Version:  Python 3--Google Colab--Jupytor Notebook
Description:  This code webscrapes the National Weather Service website
for the 5 day forecast for a given location.  The user is asked to input
a latitude and longitude for an area of interest and a presentable output 
of the 5 day forecast is printed.
'''

# import required libraries
import requests
from bs4 import BeautifulSoup

# Create an empty list to store response
forecast = []

## Provide the latitude and longitude for the location you would like to check the forecast for
## Lat/lon in decimal degrees provided for Worcester, MA
# lat = '42.2634'  # Worcester, MA latitude
# lon = '-71.8022' # Worcester, MA longitude
lat = str(input("Input Latitude:"))
lon = str(input("Input Longitude:"))

# Create url for the requested location through string concatenation
url = 'https://forecast.weather.gov/MapClick.php?lat='+lat+"&lon="+lon

# Send request to retrieve the web-page using the get() function from the requests library
# The page variable stores the response from the web-page
page = requests.get(url)

# Create a BeautifulSoup object with the response from the URL
# Access contents of the web-page using .content
# html_parser is used since our page is in HTML format
soup=BeautifulSoup(page.content,"html.parser")

# Locate elements on page to be scraped
# findAll() locates all occurrences of div tag with the given class name
# stores it in the BeautifulSoup object
weather_forecast = soup.findAll("li", {"class": "forecast-tombstone"})

# Loop through the BeautifulSoup object to extract text from every class instance using .text
# Store results in a list
for i in weather_forecast:
    i = i.text
    forecast.append(i)

# Loop through forecast list of days, removing new lines and adding commas, colons, and spaces for cleaner display
for day in forecast:
  day = day.replace('\n\n','')
  day = day.replace('\n',':')
  day = day.replace(' ', '')
  day = day.replace(':',': ')
  day = day.replace("High", ", High")
  day = day.replace("Low", ", Low")
  day = day.replace("then", " then ")
  day = day.replace("and", "and ")
  day = day.replace("This", "This ")
  day = day.replace("Showers", "Showers ")
  day = day.replace("Cloudy", "Cloudy ")
  day = day.replace("Chance", "Chance ")
  day = day.replace("Rain", "Rain ")
  day = day.replace("Fog", "Fog ")
  day = day.replace("Night", " Night")
  day = day.replace("Mostly", "Mostly ")
  day = day.replace("Partly", "Partly ")
  day = day.replace("Patchy", "Patchy ")
  day = day.replace("Slight", "Slight ")
  day = day.replace('  ', ' ')
  day = day.replace(' ,', ',')

  # Print all days in uppercase
  print(day.upper())
